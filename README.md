# Name Shrinker

長いファイル名を短いファイル名にリネームするツールです。

## 機能

- 設定 UI で対象フォルダを指定してファイル名を処理
- 無効な文字（`\n`, `\r`, `/`, `.`, `..`）をアンダーバーに置換
- 非 UTF-8 文字をアンダーバーに置換
- 143 バイトを超えるファイル名を短縮（先頭 68 バイト + "..." + 後ろ 68 バイト）
- **143 バイトを超えないファイル名でも、無効な文字や非 UTF-8 文字が含まれている場合は処理対象になります**
- ユーザーごとにインストール可能（管理者権限不要）
- スタートメニューに登録可能

## 使い方

### インストール方法

#### 方法 1: インストーラーを使用（推奨）

1. exe ファイルとインストーラーを作成（下記「開発者向け」参照）
2. `installer`フォルダに生成された`name-shrinker-setup.exe`を実行
3. インストールウィザードに従ってインストール
4. スタートメニューから「Name Shrinker」を起動

#### 方法 2: ポータブル版として使用

1. `dist`フォルダに生成された`name-shrinker.exe`を任意の場所に配置
2. ダブルクリックで起動

### 実行方法

1. アプリケーションを起動
2. 「フォルダを選択」ボタンをクリックして、処理対象のフォルダを選択
3. 「処理を実行」ボタンをクリック
4. 確認ダイアログで「はい」を選択すると処理が開始されます
5. 処理が完了すると完了メッセージが表示されます

設定したフォルダは`%APPDATA%\name-shrinker\config.json`に保存され、次回起動時にも使用されます。

### 開発者向け

#### 依存関係のインストール

```bash
uv sync
```

#### exe ファイルのビルド

```bash
uv run python build_exe.py
```

**注意**: `uv`を使っている場合は`uv run`が必要です。通常の Python 環境を使っている場合は`python build_exe.py`で実行できます。

`dist`フォルダに`name-shrinker.exe`が生成されます。

#### インストーラーの作成

1. [Inno Setup](https://jrsoftware.org/isdl.php)をインストール
2. `installer.iss`を Inno Setup で開く
3. 「ビルド」→「コンパイル」を実行
4. `installer`フォルダに`name-shrinker-setup.exe`が生成されます

## 注意事項

- ファイル名が変更されるため、重要なファイルがある場合は事前にバックアップを取ってください
- 選択したフォルダ内のすべてのファイルが処理対象になります（サブフォルダ内のファイルは処理されません）
- exe ファイル自体は処理対象外です
- 143 バイトを超えないファイル名でも、無効な文字や非 UTF-8 文字が含まれている場合はリネームされます
- 設定ファイルは`%APPDATA%\name-shrinker\config.json`に保存されます

## 技術仕様

- Python 3.14+
- PyQt6（GUI）
- PyInstaller（exe 化）
- Inno Setup（インストーラー作成）
